# 加拿大二手车信息收集工具 - 使用指南

## 📱 应用简介

这是一个网页应用，可以帮你自动从加拿大几个主要的二手车平台（Kijiji、AutoTrader、Facebook Marketplace）上收集你想要的车型信息。

**主要功能：**
- 🔍 同时搜索多个平台
- 💰 自动提取价格、里程、年份
- 📝 自动总结车辆描述（使用AI）
- 📱 完全手机友好，无需安装应用

---

## 🚀 快速开始

### 第一步：获取应用链接

你有两个选择：

#### 选项A：使用已部署的应用（推荐）
如果你已经按照部署指南部署了应用，你会有一个URL，例如：
```
https://car-scraper-xxxx.onrender.com
```

#### 选项B：在本地运行（需要Python）
如果你的电脑上有Python：

**Mac/Linux：**
```bash
cd /path/to/car_scraper
./run_local.sh
```

**Windows：**
双击 `run_local.bat` 文件

然后打开浏览器访问：`http://localhost:5000`

---

## 🔍 如何搜索车辆

### 步骤1：打开应用

在手机浏览器中打开应用URL。你会看到一个搜索表单。

### 步骤2：输入车型

在"Car Model"输入框中输入你想要的车型。

**例子：**
- Honda Civic
- Toyota Camry
- Ford Focus
- BMW 3 Series
- Mazda CX-5

### 步骤3：选择地区

从下拉菜单中选择你想搜索的地区：
- All of Canada（全加拿大）
- Ontario（安大略省）
- British Columbia（不列颠哥伦比亚省）
- Alberta（艾伯塔省）
- Quebec（魁北克省）
- 其他省份...

### 步骤4：选择平台

勾选你想搜索的平台：
- ✅ **Kijiji**：加拿大最大的分类广告网站
- ✅ **AutoTrader**：加拿大专业的二手车交易平台
- ☐ **Facebook Marketplace**：Facebook上的本地交易（目前需要特殊配置）

**建议：** 默认选择Kijiji和AutoTrader就够了。

### 步骤5：启用AI总结（可选）

如果你想让AI自动总结每个车辆的描述，勾选"Summarize descriptions (uses AI)"。

**注意：** 这个功能需要OpenAI API密钥，而且会产生一些费用（但很便宜）。

### 步骤6：点击搜索

点击"Search Listings"按钮开始搜索。

---

## 📊 查看搜索结果

### 等待结果

搜索可能需要30-60秒，因为应用需要从网站抓取数据。请耐心等待。

### 理解结果

每个车辆显示为一张卡片，包含以下信息：

| 字段 | 说明 |
|------|------|
| **平台** | 来自哪个网站（Kijiji/AutoTrader） |
| **标题** | 车辆基本信息 |
| **价格** | 售价 |
| **位置** | 车辆所在地 |
| **年份** | 车的年份（例如2020） |
| **里程** | 行驶里程（例如150,000 km） |
| **AI总结** | AI自动总结的车辆状况（如果启用） |
| **描述** | 卖家的完整描述 |
| **查看链接** | 点击可以在原网站查看完整信息 |

### 保存或分享

- **保存图片**：长按卡片截图
- **分享链接**：点击"View on [Platform]"复制链接分享给朋友
- **记录信息**：截图或手动记录你感兴趣的车

---

## 🎯 搜索技巧

### 1. 精确搜索

**好的搜索：**
- "Honda Civic 2020"
- "Toyota Camry"
- "Ford Mustang"

**不好的搜索：**
- "car"（太宽泛）
- "cheap"（不是车型）

### 2. 地区选择

- 如果你只在某个省份找车，选择那个省份
- 如果你愿意跨省找车，选择"All of Canada"

### 3. 多次搜索

- 尝试不同的车型拼写
- 尝试不同的地区
- 尝试不同的平台组合

### 4. 定期搜索

- 新的车辆每天都在上市
- 定期搜索可以找到最新的车

---

## 🤖 AI总结功能

### 什么是AI总结？

AI总结使用OpenAI的GPT模型，自动阅读卖家的长描述，然后用1-2句话总结车的关键信息。

### 例子

**原始描述：**
> "2018 Honda Civic, excellent condition, fully serviced, new tires, no accidents, clean title, one owner, garage kept, all maintenance records available, asking $15,500"

**AI总结：**
> "2018 Honda Civic in excellent condition with new tires, full service history, and no accident record. One owner, garage kept vehicle."

### 如何启用

1. 勾选"Summarize descriptions (uses AI)"
2. 确保你的应用已配置OpenAI API密钥
3. 搜索时会自动总结所有描述

### 成本

- OpenAI API不是完全免费的
- 但每个总结的成本很低（通常不到0.01美元）
- 100个车的总结大约花费0.50-1美元

---

## ⚙️ 设置和配置

### 启用AI总结功能

如果你想使用AI总结功能，需要：

1. **获取OpenAI API密钥：**
   - 访问 https://platform.openai.com/api-keys
   - 登录或创建账户
   - 点击"Create new secret key"
   - 复制密钥

2. **配置应用：**
   - 如果在云服务上（Render/Railway/Heroku）：
     - 进入应用的环境变量设置
     - 添加 `OPENAI_API_KEY` = 你的密钥
     - 重新部署应用
   
   - 如果在本地运行：
     - 创建 `.env` 文件
     - 添加 `OPENAI_API_KEY=你的密钥`
     - 重启应用

---

## 🔧 常见问题

### Q1: 搜索没有返回结果

**可能原因：**
- 网站结构改变了
- 搜索词不准确
- 网站暂时无法访问

**解决方案：**
- 尝试不同的车型名称
- 尝试不同的地区
- 等几分钟后重试
- 检查网站是否正常（直接访问Kijiji或AutoTrader）

### Q2: 搜索很慢

**这是正常的！** 应用需要从网站抓取数据，通常需要30-60秒。

**如果超过2分钟：**
- 可能是网络问题
- 可能是网站响应慢
- 尝试刷新页面重新搜索

### Q3: AI总结不工作

**可能原因：**
- 没有设置OpenAI API密钥
- API密钥无效或过期
- API额度用完了

**解决方案：**
- 检查OpenAI API密钥是否正确设置
- 访问 https://platform.openai.com/account/usage 检查使用情况
- 如果额度用完，需要添加付款方式

### Q4: 某个平台的搜索不工作

**可能原因：**
- 网站改变了HTML结构
- 网站有反爬虫机制
- 网站暂时无法访问

**解决方案：**
- 尝试只搜索其他平台
- 等几天后重试（网站可能在更新）
- 直接访问网站检查是否正常

### Q5: 我想修改应用

**你可以！** 这个应用是开源的。

**如何修改：**
1. 编辑 `app.py`（后端逻辑）或 `templates/index.html`（前端界面）
2. 上传到GitHub
3. 云服务会自动重新部署

---

## 📲 在手机上添加到主屏幕

### iPhone（Safari）

1. 打开Safari浏览器
2. 访问应用URL
3. 点击下方的分享按钮（方框+箭头）
4. 向下滚动，点击"添加到主屏幕"
5. 输入应用名称（例如"Car Finder"）
6. 点击"添加"

现在你可以像使用原生应用一样使用它！

### Android（Chrome）

1. 打开Chrome浏览器
2. 访问应用URL
3. 点击右上角的菜单（三个点）
4. 点击"安装应用"或"添加到主屏幕"
5. 确认安装

---

## 💡 最佳实践

### 1. 定期搜索

二手车市场变化快，新车每天都在上市。建议：
- 每天搜索一次你感兴趣的车型
- 设置提醒（可以在手机日历上）

### 2. 比较价格

- 同一车型在不同地区价格可能不同
- 搜索多个地区比较价格
- 记录你看到的最低价格

### 3. 联系卖家

当你找到感兴趣的车：
1. 点击"View on [Platform]"进入原网站
2. 查看完整信息和照片
3. 联系卖家询问更多细节
4. 安排看车

### 4. 安全建议

- 不要通过网络转账，在看车前不要付款
- 见面时在公共场所
- 带一个朋友一起去看车
- 检查车的证件和维修记录
- 考虑请专业人士检查车

---

## 🆘 获取帮助

### 应用有问题？

1. **检查日志**：
   - 如果在云服务上，查看应用的日志
   - 如果在本地，查看终端输出

2. **尝试重新部署**：
   - 在云服务上点击"Redeploy"
   - 在本地重启应用

3. **清除缓存**：
   - 清除浏览器缓存
   - 关闭浏览器重新打开

### 网站爬虫问题？

网站经常改变结构，这可能导致爬虫失效。如果某个平台的搜索不工作：
1. 直接访问该网站检查是否正常
2. 等几天后重试
3. 尝试搜索其他平台

---

## 📞 反馈和建议

如果你有改进建议或发现问题，可以：
1. 在GitHub上提Issue
2. 修改代码并提交Pull Request
3. 联系开发者

---

## 🎓 学习更多

想了解应用的工作原理？

- **后端代码**：查看 `app.py`
- **前端代码**：查看 `templates/index.html`
- **部署**：查看 `DEPLOYMENT_GUIDE.md`

这是一个很好的学习项目，可以了解：
- Python Flask框架
- 网页爬虫
- API集成
- 前端开发

---

祝你找到满意的车！🚗

有任何问题，随时问我。

