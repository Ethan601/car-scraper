Text file: index.html
Latest content with line numbers:
501	            const platformCheckboxes = document.querySelectorAll('input[name="platforms"]:checked');
502	            const platforms = Array.from(platformCheckboxes).map(cb => cb.value);
503	
504	            if (!carModel) {
505	                showError('Please enter a car model');
506	                return;
507	            }
508	
509	            if (platforms.length === 0) {
510	                showError('Please select at least one platform');
511	                return;
512	            }
513	
514	            // Clear previous results
515	            errorContainer.innerHTML = '';
516	            listingsGrid.innerHTML = '';
517	            resultsSection.style.display = 'none';
518	            emptyState.style.display = 'none';
519	
520	            // Show loading
521	            loading.style.display = 'block';
522	            searchBtn.disabled = true;
523	
524	            try {
525	                const response = await fetch('/api/search', {
526	                    method: 'POST',
527	                    headers: {
528	                        'Content-Type': 'application/json'
529	                    },
530	                    body: JSON.stringify({
531	                        car_model: carModel,
532	                        location: location,
533	                        platforms: platforms,
534	                        summarize: summarize
535	                    })
536	                });
537	
538	                const data = await response.json();
539	
540	                if (!response.ok) {
541	                    showError(data.error || 'Search failed');
542	                    return;
543	                }
544	
545	                if (data.count === 0) {
546	                    emptyState.style.display = 'block';
547	                } else {
548	                    displayResults(data.listings, data.count);
549	                }
550	            } catch (error) {
551	                showError('Error: ' + error.message);
552	            } finally {
553	                loading.style.display = 'none';
554	                searchBtn.disabled = false;
555	            }
556	        });
557	
558	        function displayResults(listings, count) {
559	            resultsCount.textContent = `Found ${count} listing${count !== 1 ? 's' : ''} across selected platforms`;
560	            
561	            listings.forEach(listing => {
562	                const card = createListingCard(listing);
563	                listingsGrid.appendChild(card);
564	            });
565	
566	            resultsSection.style.display = 'block';
567	            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
568	        }
569	
570	        function createListingCard(listing) {
571	            const card = document.createElement('div');
572	            card.className = 'listing-card';
573	
574	            const platformClass = listing.platform.toLowerCase();
575	            const platformBadge = `<span class="platform-badge ${platformClass}">${listing.platform}</span>`;
576	
577	            let detailsHTML = `
578	                <div class="listing-details">
579	                    <div class="detail-item">
580	                        <div class="detail-label">Year</div>
581	                        <div class="detail-value">${listing.year || 'N/A'}</div>
582	                    </div>
583	                    <div class="detail-item">
584	                        <div class="detail-label">Mileage</div>
585	                        <div class="detail-value">${listing.mileage || 'N/A'}</div>
586	                    </div>
587	                </div>
588	            `;
589	
590	            let summaryHTML = '';
591	            if (listing.summary) {
592	                summaryHTML = `
593	                    <div class="listing-summary">
594	                        <strong>AI Summary:</strong> ${listing.summary}
595	                    </div>
596	                `;
597	            }
598	
599	            let descriptionHTML = '';
600	            if (listing.description && listing.description !== 'N/A') {